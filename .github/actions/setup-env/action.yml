name: 'Setup Environment'
description: 'Setup Environment'

inputs:
  os:
    description: "operating system"
    required: true

runs:
  using: 'composite'
  steps:
    - name: Set up Python
      uses: actions/setup-python@a26af69be951a213d495a4c3e4e4022e16d87065 # v5.6.0
      with:
        python-version: "3.8"

    - name: Setup system and dependencies (Linux)
      shell: bash
      if: inputs.os == 'Linux'
      run: |
        sudo apt update -y
        sudo apt install -y build-essential tzdata cmake clang curl pkg-config g++-14
        wget https://apt.llvm.org/llvm.sh
        chmod +x llvm.sh
        sudo ./llvm.sh 21
        sudo apt install clang-format-21
        sudo chmod 755 ./scripts/library_tool.sh
        sudo chmod 755 ./scripts/build.sh

    - name: Install Python Base Packages
      shell: bash
      run: |
        pip install uv
        uv pip install --system --upgrade pip
